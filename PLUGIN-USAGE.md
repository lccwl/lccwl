# AI智能网站优化器 - 完整使用说明 (v2.0稳定版)

## 🚀 插件已完全优化，所有功能正常运行！

### 全新AI对接系统
✅ 按照Siliconflow官方API文档重构
✅ 支持4种内容类型：文本、图片、视频、音频
✅ 实时状态显示，让用户了解生成进度
✅ 真实API调用，无虚假数据
✅ 完整错误处理和用户反馈

### WordPress自动发布系统
✅ 三种发布模式：草稿、立即发布、定时发布
✅ 智能内容格式化（文本、图片、视频、音频）
✅ 自动标记AI生成内容
✅ 发布后提供编辑链接

## 安装与配置

### 1. 安装插件
```
1. 将 ai-website-optimizer.php 上传到 /wp-content/plugins/
2. 在WordPress后台"插件"页面激活
3. 在左侧菜单栏找到"AI智能优化器"
```

### 2. 配置API密钥
```
1. 进入"AI智能优化器" → "插件设置"
2. 输入Siliconflow API密钥
3. 点击"保存设置"
4. 点击"测试API连接"验证密钥有效性
```

## 功能详解

### AI内容生成器

#### 支持的内容类型：
1. **文本内容** - 使用 Qwen/QwQ-32B 模型
   - 文章、博客、产品描述等
   - 最大2000 tokens
   - 支持中英文

2. **图片生成** - 使用 stabilityai/stable-diffusion-xl-base-1.0
   - 1024x1024高清图片
   - 20步推理生成
   - 图片URL有效期1小时

3. **视频生成** - 使用 Lightricks/LTX-Video
   - 30步推理生成
   - 轮询机制获取结果
   - 最长等待5分钟

4. **音频生成** - 使用 fishaudio/fish-speech-1.5
   - 文本转语音
   - MP3格式输出
   - 支持语速调节

### WordPress发布功能

#### 三种发布模式：
1. **保存草稿** - 内容保存为草稿状态
2. **立即发布** - 内容直接发布到网站
3. **定时发布** - 设置未来时间自动发布

#### 发布流程：
```
1. 生成AI内容
2. 填写文章标题
3. 选择发布类型
4. 如选择定时发布，设置发布时间
5. 点击"发布到WordPress"
6. 系统返回文章编辑链接
```

#### 内容格式化：
- **文本**：自动段落格式化
- **图片**：插入响应式图片标签
- **视频**：插入HTML5视频播放器
- **音频**：插入HTML5音频播放器

## 实时功能

### 状态显示
- 文本生成：显示"正在生成文本内容..."
- 图片生成：显示"正在生成图片，请耐心等待..."
- 视频生成：显示"正在生成视频，这可能需要几分钟..."
- 音频生成：显示"正在合成音频..."

### 进度反馈
- 按钮状态变化（禁用/启用）
- 实时状态文字更新
- 成功/失败消息提示
- 网络错误提示

## 技术规格

### API端点使用：
- 聊天对话：`/v1/chat/completions`
- 图片生成：`/v1/images/generations`
- 视频生成：`/v1/video/submit` + `/v1/video/status`
- 音频合成：`/v1/audio/speech`
- 模型列表：`/v1/models`（用于API测试）

### 安全特性：
- WordPress nonce验证
- 数据过滤和清理
- API密钥加密存储
- 错误信息安全处理

### 系统要求：
- WordPress 5.0+
- PHP 7.4+
- 有效的Siliconflow API密钥
- 稳定的网络连接

## 故障排除

### 常见问题：
1. **API连接失败** - 检查密钥是否正确
2. **内容生成超时** - 视频生成需要较长时间
3. **发布失败** - 检查WordPress用户权限
4. **图片/视频显示异常** - URL可能已过期

### 错误代码参考：
- 401：API密钥无效
- 429：请求频率过高
- 500：服务器内部错误

## 更新日志

### v2.0 - 2025年7月7日
- 重构AI对接系统，严格按照Siliconflow API文档
- 新增WordPress自动发布功能
- 添加实时状态显示
- 优化错误处理机制
- 完善用户界面交互